<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="robots" content="noindex,nofollow">
<meta name="referrer" content="no-referrer">
<meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; script-src 'self' 'unsafe-inline'; object-src 'none'; base-uri 'self'; form-action 'self' mailto:;">
<title>vc · Philip Adam</title>
<style>
  :root{ --brand:#003366; --muted:#5f6b7a; --bg:#f6f8fb; --card:#fff; }
  html,body{ margin:0; padding:0; background:var(--bg); color:#111; font-family:"Segoe UI",system-ui,-apple-system,Arial,sans-serif; }
  .wrap{ max-width:820px; margin:40px auto; padding:0 18px; }
  .card{ background:var(--card); border:1px solid #e6ebf0; border-left:6px solid var(--brand); border-radius:10px; padding:22px; box-shadow:0 8px 26px rgba(0,0,0,.06); }
  h1{ margin:0 0 6px; color:var(--brand); font-size:22px; font-weight:700; letter-spacing:.2px; }
  .muted{ color:var(--muted); }
  .row{ display:flex; gap:12px; flex-wrap:wrap; }
  .col{ flex:1 1 260px; min-width:200px; }
  label{ display:block; font-size:13px; margin-bottom:6px; color:#333; }
  input[type="text"], input[type="email"], textarea{
    width:100%; padding:10px 12px; border:1px solid #d7dee6; border-radius:8px; font-size:14px; box-sizing:border-box; background:#fff;
  }
  textarea{ min-height:110px; resize:vertical; }
  .actions{ margin-top:14px; display:flex; gap:12px; align-items:center; flex-wrap:wrap; }
  button{ background:var(--brand); color:#fff; border:none; padding:10px 16px; border-radius:8px; cursor:pointer; font-weight:600; }
  button:disabled{ opacity:.55; cursor:not-allowed; }
  .hint{ font-size:12px; color:var(--muted); }
  .sp{ height:16px; }
  .err{ background:#fff3f3; color:#8b2a2a; border:1px solid #f1c2c2; padding:10px 12px; border-radius:8px; font-size:14px; display:none; }
  .ok { background:#e9f7ef; color:#0a6a3a; border:1px solid #cfeedb; padding:10px 12px; border-radius:8px; font-size:14px; display:none; }
  .hr{ height:1px; background:#e6ebf0; margin:16px 0; }
  /* Hidden-by-default sections */
  #profile, #contact{ display:none; }
</style>
</head>
<body>
  <div class="wrap">
    <!-- GATE -->
    <div class="card" id="gate">
      <h1>Zugangscode</h1>
      <p class="muted">Bitte den Code von der Visitenkarte eingeben.</p>
      <div class="row" style="margin-top:10px;">
        <div class="col" style="flex:0 0 220px;">
          <label for="code">Code</label>
          <input id="code" type="text" autocomplete="off" autocapitalize="characters" spellcheck="false" placeholder="z. B. PA2025" autofocus>
        </div>
      </div>
      <div class="actions">
        <button id="unlock">Anzeigen</button>
        <span class="hint">Hinweis: Kein Tracking. Kein Upload. Reiner Sichtschutz.</span>
      </div>
      <div id="gateErr" class="err" style="margin-top:12px;">Code falsch. Bitte erneut versuchen.</div>
    </div>

    <div class="sp"></div>

    <!-- PROFILE (locked until code ok) -->
    <div class="card" id="profile" role="region" aria-labelledby="p-title">
      <h1 id="p-title">Kurzprofil — Philip Adam</h1>
      <p class="muted" style="margin:2px 0 12px;">
        Projektmanager mit Schwerpunkt Digitalisierung & Prozessgestaltung – verbindet operative Erfahrung mit strukturierter, technischer Umsetzung für nachhaltige Veränderungen.
      </p>

      <div class="hr"></div>

      <div class="row" style="margin-top:6px;">
        <div class="col">
          <strong>Schwerpunkte</strong><br>
          Digitalisierung von Prozessen · ERP (Business Central) · Transformation · Stakeholderführung · Shopfloor–IT-Brücke
        </div>
        <div class="col">
          <strong>Technik</strong><br>
          MS Dynamics 365 BC · AL · MDE/Scannerprozesse · Power BI · C#/C++ (Grundlagen)
        </div>
      </div>

      <div class="row" style="margin-top:10px;">
        <div class="col">
          <strong>Stärken</strong><br>
          strukturierte Umsetzung · klare Kommunikation · Verantwortungsübernahme · Veränderungsführung
        </div>
        <div class="col">
          <strong>Sprachen</strong><br>
          Deutsch (C2), Englisch (B2)
        </div>
      </div>

      <div class="hr"></div>

      <p class="muted">Für vollständige Projektdetails sende ich den ausführlichen CV gern auf Anfrage zu.</p>
    </div>

    <div class="sp"></div>

    <!-- CONTACT (locked until code ok) -->
    <div class="card" id="contact" role="region" aria-labelledby="c-title">
      <h1 id="c-title">Kontakt</h1>
      <p class="muted" style="margin:2px 0 12px;">Ihre Anfrage wird lokal in Ihrem E-Mail-Programm vorbereitet. Keine Datenspeicherung auf dieser Seite.</p>

      <form id="contactForm" novalidate>
        <div class="row">
          <div class="col">
            <label for="name">Name *</label>
            <input id="name" type="text" placeholder="Vorname Nachname" required>
          </div>
          <div class="col">
            <label for="email">E-Mail *</label>
            <input id="email" type="email" placeholder="email@beispiel.de" required>
          </div>
        </div>

        <div style="margin-top:12px;">
          <label for="msg">Nachricht (optional)</label>
          <textarea id="msg" placeholder="Wie haben Sie diese Karte erhalten? (z. B. Messe X / Empfehlung Y)"></textarea>
        </div>

        <!-- Mini-Schutz -->
        <div class="row" style="margin-top:12px; align-items:center;">
          <div class="col" style="flex:0 0 220px;">
            <label for="cap" class="muted">Sicherheitsfrage</label>
            <div class="row" style="align-items:center;">
              <div class="col" style="flex:0 0 120px;">
                <input id="cap" type="text" inputmode="numeric" pattern="[0-9]*" placeholder="" aria-label="Ergebnis eingeben">
              </div>
              <div class="col" style="flex:1 1 auto;">
                <span id="capQ" class="hint"></span>
              </div>
            </div>
          </div>
        </div>

        <div class="actions">
          <button type="submit">E-Mail vorbereiten</button>
          <span class="hint">Ich antworte persönlich mit dem ausführlichen CV.</span>
        </div>

        <div id="cErr" class="err" style="margin-top:12px;">Bitte Pflichtfelder prüfen und Sicherheitsfrage korrekt lösen.</div>
        <div id="cOk"  class="ok"  style="margin-top:12px;">E-Mail-Entwurf geöffnet.</div>
      </form>
    </div>
  </div>

<script>
(function(){
  // ===== Helpers =====
  function normalize(s){
    return (s || "").trim().toUpperCase().replace(/[\s-]+/g, "");
  }
  async function sha256Hex(str){
    const enc = new TextEncoder().encode(str);
    const buf = await crypto.subtle.digest('SHA-256', enc);
    return Array.from(new Uint8Array(buf)).map(b=>b.toString(16).padStart(2,'0')).join('');
  }

  // ===== Konfiguration: Hash des normalisierten Codes "PA2025" =====
  const CODE_HASH = "78be3e15867ca2669b2ddaa6a1b439a9ec81a4ef9820854b7a3885d8c6cee95a";

  // Ziel-Mail (verschleiert: "adam.card.service@protonmail.com")
  const emailCodes = [97,100,97,109,46,99,97,114,100,46,115,101,114,118,105,99,101,64,112,114,111,116,111,110,109,97,105,108,46,99,111,109];
  const TARGET_MAIL = emailCodes.map(c => String.fromCharCode(c)).join('');

  // ===== Gate Logic =====
  const codeInput = document.getElementById('code');
  const unlockBtn = document.getElementById('unlock');
  const gateErr = document.getElementById('gateErr');
  const gate = document.getElementById('gate');
  const profile = document.getElementById('profile');
  const contact = document.getElementById('contact');

  // UX: Enter im Codefeld erlaubt + Fehlermeldung bei Eingabe ausblenden
  codeInput.addEventListener('keydown', (e)=>{ if(e.key === 'Enter'){ unlockBtn.click(); } });
  codeInput.addEventListener('input', ()=>{ gateErr.style.display = 'none'; });

  unlockBtn.addEventListener('click', async function(){
    gateErr.style.display = 'none';
    const raw = (codeInput.value || "");
    if (!raw.trim()){ gateErr.style.display = 'block'; codeInput.focus(); return; }

    const norm = normalize(raw);
    const h = await sha256Hex(norm);

    if (h === CODE_HASH){
      gate.style.display = 'none';
      profile.style.display = 'block';
      contact.style.display = 'block';
      setTimeout(()=> document.getElementById('name').focus(), 150);
    } else {
      gateErr.style.display = 'block';
      codeInput.select(); codeInput.focus();
    }
  });

  // ===== Kontakt (mailto) =====
  const a = Math.floor(2 + Math.random()*7), b = Math.floor(1 + Math.random()*8);
  const ans = a + b;
  document.getElementById('capQ').textContent = `Bitte lösen: ${a} + ${b} = ?`;
  document.getElementById('cap').setAttribute('placeholder', `${a}+${b}=?`);

  const form = document.getElementById('contactForm');
  const cErr = document.getElementById('cErr');
  const cOk  = document.getElementById('cOk');

  form.addEventListener('submit', function(e){
    e.preventDefault();
    cErr.style.display = 'none';
    cOk.style.display = 'none';

    const name = (document.getElementById('name').value || '').trim();
    const email = (document.getElementById('email').value || '').trim();
    const msg = (document.getElementById('msg').value || '').trim();
    const cap = (document.getElementById('cap').value || '').trim();

    const emailOk = /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
    if (!name || !emailOk || String(ans) !== cap){ cErr.style.display = 'block'; return; }

    const subject = encodeURIComponent('Kontakt (VC) – ' + name);
    const bodyLines = [
      'Name: ' + name,
      'E-Mail: ' + email,
      msg ? ('Nachricht: ' + msg) : 'Nachricht: (nicht angegeben)',
      '',
      'Hinweis: Zugriff via vc-Seite mit gültigem Code.'
    ];
    const body = encodeURIComponent(bodyLines.join('\n'));
    const href = `mailto:${encodeURIComponent(TARGET_MAIL)}?subject=${subject}&body=${body}`;
    window.location.href = href;
    cOk.style.display = 'block';
  });
})();
</script>
</body>
</html>
